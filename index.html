<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¾ í…Œë‹ˆìŠ¤ NTRP ë ˆë²¨ í…ŒìŠ¤íŠ¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6A11CB 0%, #2575FC 100%); /* ë” ê¹Šì€ ë³´ë¼-íŒŒë‘ ê·¸ë¼ë°ì´ì…˜ */
            --primary-color-start: #6A11CB;
            --primary-color-end: #2575FC;
            --text-dark: #222;
            --text-medium: #555;
            --text-light: #777;
            --bg-light: #f8f9fa;
            --border-light: #e0e0e0;
            --shadow-light: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 15px 45px rgba(0, 0, 0, 0.15);
            --shadow-button-hover: 0 10px 25px rgba(106, 17, 203, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif; /* í°íŠ¸ ë³€ê²½ */
            background: var(--primary-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 25px; /* ëª¨ì„œë¦¬ ë” ë‘¥ê¸€ê²Œ */
            padding: 40px;
            box-shadow: var(--shadow-medium); /* ê·¸ë¦¼ì ê°•í™” */
            max-width: 650px; /* ë„ˆë¹„ ì•½ê°„ ë„“í˜ */
            width: 100%;
            text-align: center;
            margin: 20px;
            min-height: 85vh; /* ìµœì†Œ ë†’ì´ ì¦ê°€ */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* ìš”ì†Œë“¤ ì‚¬ì´ì— ê³µê°„ ë°°ë¶„ */
        }

        h1 {
            color: var(--text-dark);
            margin-bottom: 30px;
            font-size: 2.8rem; /* í¬ê¸° ì•½ê°„ í‚¤ì›€ */
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: -0.03em; /* ì•½ê°„ì˜ ìê°„ ì¡°ì ˆ */
        }

        .progress-bar {
            width: 100%;
            height: 10px; /* ë†’ì´ ì•½ê°„ í‚¤ì›€ */
            background: var(--border-light);
            border-radius: 5px;
            margin-bottom: 35px; /* ê°„ê²© ëŠ˜ë¦¼ */
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
            border-radius: 5px;
        }

        .question-card {
            margin-bottom: 30px;
        }

        .question-card h2 {
            color: var(--text-medium);
            margin-bottom: 15px;
            font-size: 1.3rem; /* í¬ê¸° ì•½ê°„ í‚¤ì›€ */
            font-weight: 500;
        }

        .question {
            font-size: 1.6rem; /* í¬ê¸° í‚¤ì›€ */
            color: var(--text-dark);
            margin-bottom: 15px;
            line-height: 1.5;
            font-weight: 600;
        }

        .question-description {
            font-size: 1.1rem; /* í¬ê¸° ì•½ê°„ í‚¤ì›€ */
            color: var(--text-light);
            margin-bottom: 40px; /* ê°„ê²© ëŠ˜ë¦¼ */
            line-height: 1.6;
            font-style: normal; /* ì´íƒ¤ë¦­ì²´ ì œê±° */
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 18px; /* ê°„ê²© ëŠ˜ë¦¼ */
            margin-bottom: 40px; /* ê°„ê²© ëŠ˜ë¦¼ */
        }

        .option {
            display: flex;
            align-items: center;
            padding: 22px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border: 2px solid var(--border-light);
            border-radius: 15px; /* ë” ë‘¥ê¸€ê²Œ */
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            min-height: 70px; /* ìµœì†Œ ë†’ì´ ì¦ê°€ */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
        }

        .option:hover {
            border-color: var(--primary-color-start);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .option.selected {
            border-color: var(--primary-color-end);
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-button-hover);
        }

        .option .score {
            font-weight: 700; /* ë” êµµê²Œ */
            font-size: 1.3rem; /* í¬ê¸° í‚¤ì›€ */
            margin-right: 20px; /* ê°„ê²© ëŠ˜ë¦¼ */
            min-width: 50px; /* ìµœì†Œ ë„ˆë¹„ ì¦ê°€ */
        }

        .option .description {
            flex: 1;
            font-size: 1.1rem; /* í¬ê¸° ì•½ê°„ í‚¤ì›€ */
            line-height: 1.5;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 30px; /* ê°„ê²© ëŠ˜ë¦¼ */
        }

        .nav-btn {
            padding: 15px 35px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border: none;
            border-radius: 12px; /* ë” ë‘¥ê¸€ê²Œ */
            font-size: 1.1rem; /* í¬ê¸° ì•½ê°„ í‚¤ì›€ */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* í…ìŠ¤íŠ¸ ê·¸ë¦¼ì */
        }

        .nav-btn.prev {
            background: var(--bg-light);
            color: var(--text-medium);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        .nav-btn.prev:hover {
            background: #e9ecef;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
        }

        .nav-btn.next,
        .nav-btn.submit {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-button-hover);
        }

        .nav-btn.next:hover,
        .nav-btn.submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(106, 17, 203, 0.5);
        }

        .nav-btn:disabled {
            opacity: 0.6; /* ë¶ˆíˆ¬ëª…ë„ ì¡°ì ˆ */
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-card {
            background: var(--primary-gradient);
            color: white;
            border-radius: 20px;
            padding: 40px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            margin-bottom: 30px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .result-card h2 {
            margin-bottom: 25px;
            font-size: 1.8rem; /* í¬ê¸° í‚¤ì›€ */
            font-weight: 600;
        }

        .ntrp-level {
            font-size: 5rem; /* í¬ê¸° ë” í‚¤ì›€ */
            font-weight: 800; /* ë” êµµê²Œ */
            margin: 25px 0;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4); /* ê·¸ë¦¼ì ê°•í™” */
            line-height: 1;
        }

        .description {
            font-size: 1.4rem; /* í¬ê¸° í‚¤ì›€ */
            margin-bottom: 25px;
            line-height: 1.6;
            font-weight: 400;
        }

        .stats {
            background: rgba(255, 255, 255, 0.15); /* ë°°ê²½ ë¶ˆíˆ¬ëª…ë„ ì¡°ì ˆ */
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
        }

        .stats p {
            margin: 8px 0;
            font-size: 1.1rem;
        }

        .detailed-analysis {
            background: var(--bg-light);
            border-radius: 20px;
            padding: 35px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            margin: 30px 0;
            text-align: left;
            box-shadow: var(--shadow-light);
        }

        .detailed-analysis h3 {
            color: var(--text-dark);
            margin-bottom: 30px;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .detailed-analysis h4 {
            color: var(--text-medium);
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: 600;
            text-align: center;
        }

        .score-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .score-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); /* ê·¸ë¦¼ì */
        }

        .category-name {
            min-width: 90px; /* ë„ˆë¹„ ì•½ê°„ ëŠ˜ë¦¼ */
            font-weight: 600;
            color: var(--text-dark);
            text-align: left; /* ì™¼ìª½ ì •ë ¬ */
        }

        .score-bar {
            flex: 1;
            height: 15px; /* ë†’ì´ í‚¤ì›€ */
            background: var(--border-light);
            border-radius: 8px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 8px;
        }

        .score-value {
            min-width: 50px; /* ë„ˆë¹„ ì•½ê°„ ëŠ˜ë¦¼ */
            font-weight: 600;
            color: var(--text-dark);
            text-align: right; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px; /* ê°„ê²© ëŠ˜ë¦¼ */
            margin-bottom: 35px;
        }

        .strengths, .weaknesses {
            background: white;
            padding: 25px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .strengths h4 {
            color: #28a745; /* ê°•ì  ìƒ‰ìƒ */
            font-weight: 700;
            margin-bottom: 15px;
        }

        .weaknesses h4 {
            color: #dc3545; /* ì•½ì  ìƒ‰ìƒ */
            font-weight: 700;
            margin-bottom: 15px;
        }

        .strengths ul, .weaknesses ul {
            list-style: none;
            padding: 0;
        }

        .strengths li, .weaknesses li {
            padding: 10px 0; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border-bottom: 1px solid #eee;
            font-size: 1.05rem;
            color: var(--text-medium);
        }

        .strengths li:last-child, .weaknesses li:last-child {
            border-bottom: none;
        }

        .improvement-suggestions {
            background: white;
            padding: 25px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
            margin-top: 25px;
        }

        .improvement-suggestions h4 {
            color: #007bff; /* ì œì•ˆ ìƒ‰ìƒ */
            font-weight: 700;
            margin-bottom: 15px;
        }

        .improvement-suggestions ul {
            list-style: none;
            padding: 0;
        }

        .improvement-suggestions li {
            padding: 12px 0; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border-bottom: 1px solid #eee;
            line-height: 1.7;
            font-size: 1.05rem;
            color: var(--text-medium);
        }

        .improvement-suggestions li:last-child {
            border-bottom: none;
        }

        .restart-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 18px 50px; /* íŒ¨ë”© ëŠ˜ë¦¼ */
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 40px; /* ê°„ê²© ëŠ˜ë¦¼ */
            box-shadow: var(--shadow-button-hover);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(106, 17, 203, 0.4);
        }

        /* Welcome Screen Styles */
        .welcome-screen {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            flex-grow: 1; /* ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ê³µê°„ì„ ì±„ìš°ë„ë¡ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .welcome-title {
            font-size: 3rem; /* ë” í¬ê²Œ */
            font-weight: 800; /* ë” êµµê²Œ */
            color: var(--primary-color-start); /* ë©”ì¸ ìƒ‰ìƒ ì‚¬ìš© */
            margin-bottom: 25px;
            line-height: 1.2;
            letter-spacing: -0.04em;
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }

        .welcome-subtitle {
            font-size: 1.5rem; /* ë” í¬ê²Œ */
            color: var(--text-medium);
            margin-bottom: 35px;
            line-height: 1.6;
            font-weight: 400;
        }

        .welcome-description {
            font-size: 1.15rem; /* ì•½ê°„ í‚¤ì›€ */
            color: var(--text-light);
            line-height: 1.8;
            margin-bottom: 50px; /* ê°„ê²© ëŠ˜ë¦¼ */
            text-align: center; /* ê°€ìš´ë° ì •ë ¬ */
            max-width: 500px; /* ë„ˆë¹„ ì œí•œ */
        }

        .start-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 20px 60px; /* íŒ¨ë”© ë” ëŠ˜ë¦¼ */
            border-radius: 20px; /* ë” ë‘¥ê¸€ê²Œ */
            font-size: 1.4rem; /* ë” í¬ê²Œ */
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(106, 17, 203, 0.4); /* ê·¸ë¦¼ì ê°•í™” */
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.05em; /* ìê°„ ì•½ê°„ ì¶”ê°€ */
        }

        .start-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 45px rgba(106, 17, 203, 0.5);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
                margin: 15px;
                min-height: 90vh;
            }
            
            h1 {
                font-size: 2.2rem;
                margin-bottom: 25px;
            }
            
            .question-card h2 {
                font-size: 1.1rem;
            }
            
            .question {
                font-size: 1.4rem;
                margin-bottom: 10px;
            }
            
            .question-description {
                font-size: 0.95rem;
                margin-bottom: 25px;
            }
            
            .options {
                gap: 12px;
                margin-bottom: 25px;
            }
            
            .option {
                padding: 18px;
                min-height: 60px;
            }
            
            .option .score {
                font-size: 1.1rem;
                min-width: 45px;
            }
            
            .option .description {
                font-size: 0.95rem;
            }
            
            .nav-btn {
                padding: 12px 25px;
                font-size: 1rem;
            }
            
            .result-card {
                padding: 30px;
            }
            
            .result-card h2 {
                font-size: 1.4rem;
            }
            
            .ntrp-level {
                font-size: 4rem;
            }
            
            .description {
                font-size: 1.1rem;
            }
            
            .stats p {
                font-size: 0.95rem;
            }
            
            .detailed-analysis {
                padding: 25px;
            }
            
            .detailed-analysis h3 {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
            
            .detailed-analysis h4 {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }
            
            .score-item {
                flex-direction: column;
                align-items: flex-start; /* ëª¨ë°”ì¼ì—ì„œ ì¢Œì¸¡ ì •ë ¬ */
                gap: 8px;
                padding: 15px;
            }
            
            .category-name {
                min-width: auto;
                text-align: left;
                width: 100%;
            }
            
            .score-bar {
                width: 100%;
            }
            
            .score-value {
                min-width: auto;
                text-align: right;
                width: 100%;
            }

            .strengths-weaknesses {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .strengths, .weaknesses, .improvement-suggestions {
                padding: 20px;
            }
            
            .strengths h4, .weaknesses h4, .improvement-suggestions h4 {
                font-size: 1.1rem;
            }
            
            .strengths li, .weaknesses li, .improvement-suggestions li {
                font-size: 0.95rem;
                line-height: 1.5;
            }
            
            .restart-btn {
                padding: 15px 30px;
                font-size: 1.1rem;
                margin-top: 30px;
            }

            /* Welcome Screen Responsive */
            .welcome-title {
                font-size: 2.3rem;
                margin-bottom: 20px;
            }
            
            .welcome-subtitle {
                font-size: 1.2rem;
                margin-bottom: 25px;
            }
            
            .welcome-description {
                font-size: 1rem;
                margin-bottom: 35px;
            }
            
            .start-btn {
                padding: 16px 45px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        </div>

    <script>
        // ì•± ìƒíƒœ ê´€ë¦¬
        let currentState = 'welcome'; // 'welcome', 'quiz', 'result'
        let currentQuestionIndex = 0;
        let answers = {};

        // NTRP ì§ˆë¬¸ ë°ì´í„°
        const questions = {
            "forehand": {
                "question": "í¬í•¸ë“œë¥¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "í¬í•¸ë“œì˜ ë°©í–¥ ì œì–´ì™€ ê¹Šì´ ì¡°ì ˆ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê³µì„ ë•Œë¦¬ê¸´ í•˜ëŠ”ë° ì–´ë””ë¡œ ê°ˆì§€ ëª¨ë¦„",
                    2: "ê°„ë‹¨í•œ ë°©í–¥ì€ ì–´ëŠ ì •ë„ ê°€ëŠ¥",
                    3: "ì¤‘ê°„ ì†ë„ì—ì„œëŠ” ë°©í–¥ ì œì–´ ê°€ëŠ¥",
                    4: "ê¹Šì´ì™€ ë°©í–¥ì„ ì˜ ì¡°ì ˆí•¨",
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ ì •í™•í•œ í¬í•¸ë“œ"
                }
            },
            "backhand": {
                "question": "ë°±í•¸ë“œë¥¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ë°±í•¸ë“œì˜ ì¼ê´€ì„±ê³¼ ë°©í–¥ ì œì–´ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ë°±í•¸ë“œ í”¼í•˜ê³  ëŒì•„ì„œ í¬í•¸ë“œë¡œ ì¹˜ë ¤ í•¨",
                    2: "ë°±í•¸ë“œ ì¹˜ê¸´ í•˜ëŠ”ë° ë¶ˆì•ˆì •í•¨",
                    3: "ì¤‘ê°„ ì†ë„ì—ì„œëŠ” ì¼ê´€ì„± ìˆê²Œ ì¹¨",
                    4: "ë°©í–¥ê³¼ ê¹Šì´ë¥¼ ì˜ ì¡°ì ˆí•¨",
                    5: "í¬í•¸ë“œë§Œí¼ ê°•ë ¥í•œ ë°±í•¸ë“œ"
                }
            },
            "serve": {
                "question": "ì„œë¸Œì˜ ì •í™•ì„±ê³¼ íŒŒì›ŒëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                "description": "ì²« ì„œë¸Œì™€ ì„¸ì»¨ë“œ ì„œë¸Œì˜ ì„±ê³µë¥ ê³¼ íš¨ê³¼ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ì„œë¸Œ ë„£ê¸°ë§Œ í•´ë„ ë‹¤í–‰",
                    2: "ì„¸ì»¨ë“œ ì„œë¸ŒëŠ” ì–´ëŠ ì •ë„ ë„£ìŒ",
                    3: "ì²« ì„œë¸Œë„ ê°€ë” ì—ì´ìŠ¤",
                    4: "íŒŒì›Œì™€ ì •í™•ì„± ëª¨ë‘ ì¢‹ìŒ",
                    5: "ì••ë°•ê° ì†ì—ì„œë„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì„œë¸Œ"
                }
            },
            "volley": {
                "question": "ë°œë¦¬ì™€ ë„¤íŠ¸ í”Œë ˆì´ë¥¼ í•  ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ë„¤íŠ¸ì—ì„œì˜ í¸ì•ˆí•¨ê³¼ ë°œë¦¬ ë“ì  ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ë„¤íŠ¸ ê·¼ì²˜ ê°€ëŠ” ê²ƒë„ ì‹«ì–´í•¨",
                    2: "ê°„ë‹¨í•œ ë°œë¦¬ëŠ” ì–´ëŠ ì •ë„",
                    3: "í¬í•¸ë“œ ë°œë¦¬ëŠ” ê´œì°®ìŒ",
                    4: "ë°œë¦¬ë¥¼ ë“ì ìœ¼ë¡œ ì—°ê²° ê°€ëŠ¥",
                    5: "ë„¤íŠ¸ì—ì„œ ìƒëŒ€ë°©ì„ ì••ë°•í•˜ëŠ” ë°œë¦¬"
                }
            },
            "footwork": {
                "question": "í’‹ì›Œí¬ì™€ ì½”íŠ¸ ì»¤ë²„ë¦¬ì§€ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                "description": "ì½”íŠ¸ ì´ë™ê³¼ í¬ì§€ì…”ë‹ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê³µ ë”°ë¼ê°€ëŠ” ê²ƒë„ í˜ë“¦",
                    2: "ê¸°ë³¸ì ì¸ ì´ë™ì€ ê°€ëŠ¥",
                    3: "ì½”íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ì–´ëŠ ì •ë„ ë¨",
                    4: "ë›°ì–´ë‚œ í’‹ì›Œí¬ë¡œ ëª¨ë“  ê³µ ì»¤ë²„",
                    5: "í”„ë¡œê¸‰ í’‹ì›Œí¬ì™€ í¬ì§€ì…”ë‹"
                }
            },
            "strategy": {
                "question": "ê²Œì„ ì „ëµì„ ì„¸ìš°ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ìƒëŒ€ë°© ë¶„ì„ê³¼ ì „ëµì  ì‚¬ê³  ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê·¸ëƒ¥ ê³µë§Œ ì¹˜ë©´ ë¨",
                    2: "ê°„ë‹¨í•œ ì „ëµì€ ìƒê°í•¨",
                    3: "ìƒëŒ€ë°© ì•½ì ì„ ë…¸ë¦¼",
                    4: "ê²Œì„ì„ ì´ëŒì–´ê°€ëŠ” ì „ëµê°€",
                    5: "ì–´ë–¤ ìƒëŒ€ë°©ë„ ë¶„ì„í•˜ê³  ëŒ€ì‘"
                }
            },
            "consistency": {
                "question": "ì¼ê´€ì„± ìˆê²Œ ë ë¦¬ë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ì•ˆì •ì ì¸ ìƒ·ê³¼ ì—ëŸ¬ ê´€ë¦¬ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "3ë²ˆ ì´ìƒ ë ë¦¬ ì´ì–´ê°€ê¸° í˜ë“¦",
                    2: "ëŠë¦° í˜ì´ìŠ¤ì—ì„œ ì§§ì€ ë ë¦¬",
                    3: "ì¤‘ê°„ ì†ë„ì—ì„œ ì¼ê´€ì„± ìˆê²Œ",
                    4: "ë¹ ë¥¸ í˜ì´ìŠ¤ì—ì„œë„ ì•ˆì •ì ",
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¬ì§€ ì•ŠìŒ"
                }
            },
            "mental": {
                "question": "ê²Œì„ ì¤‘ ë©˜íƒˆ ê´€ë¦¬ê°€ ì˜ ë˜ë‚˜ìš”?",
                "description": "ì••ë°•ê°ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œì˜ ëŒ€ì²˜ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ì‹¤ìˆ˜í•˜ë©´ ë°”ë¡œ í¬ê¸°",
                    2: "ê°„ë‹¨í•œ ê²Œì„ì—ì„œëŠ” ê´œì°®ìŒ",
                    3: "ì–´ëŠ ì •ë„ ì••ë°•ê°ì— ëŒ€ì²˜ ê°€ëŠ¥",
                    4: "ì¤‘ìš”í•œ ìˆœê°„ì—ë„ ì¹¨ì°©í•¨",
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë©˜íƒˆ"
                }
            }
        };

        // NTRP ë ˆë²¨ë³„ ìœ„íŠ¸ ìˆëŠ” ì„¤ëª…
        const ntrpDescriptions = {
            1.0: "í…Œë‹ˆìŠ¤ ì‹ ìƒì•„: ë¼ì¼“ì„ ì¡ê³  ì½”íŠ¸ì— ì²«ë°œì„ ë‚´ë””ë”˜ ë‹¹ì‹ ! í…Œë‹ˆìŠ¤ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",
            1.5: "í…Œë‹ˆìŠ¤ ê±¸ìŒë§ˆ: ê³µì„ ë•Œë¦¬ê³ ëŠ” ìˆëŠ”ë°, ì–´ë””ë¡œ ê°ˆì§€ëŠ” ê³µë§Œ ì•„ëŠ” ë‹¨ê³„! ì¼ë‹¨ ê³µì„ ë„˜ê¸°ëŠ” ê²Œ ëª©í‘œì£ .",
            2.0: "í…Œë‹ˆìŠ¤ ì´ˆê¸‰ ëª¨í—˜ê°€: ê³µì„ ë„˜ê¸°ê¸° ì‹œì‘í–ˆì§€ë§Œ, ì•„ì§ ê¸°ë³¸ê¸°ê°€ ì‹œê¸‰í•œ í…Œë¦°ì´! ë ë¦¬ëŠ” ì§§ì§€ë§Œ, ì—´ì •ì€ ë§Œë ™!",
            2.5: "í…Œë‹ˆìŠ¤ ê¸¸ì°¾ê¸° ì¤‘: ì–´ì„¤í”„ê²Œ ê³µì€ ì¹˜ì§€ë§Œ, ì–´ë””ë¡œ ê°€ì•¼ í• ì§€, ì™œ ì´ë ‡ê²Œ ì–´ë ¤ìš´ì§€ ê³ ë¯¼ì´ ë§ì€ ë‹¨ê³„. ê·¸ë˜ë„ ë ë¦¬ì˜ ë§›ì„ ì¡°ê¸ˆì”© ì•Œì•„ê°€ì£ !",
            3.0: "í…Œë‹ˆìŠ¤ ê¸°ë³¸ ë‹¤ì§€ê¸°: ì´ì œ ê³µì€ ì›¬ë§Œí¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚´ì§€ë§Œ, ê¹Šì´ë‚˜ íŒŒì›ŒëŠ” ì•„ì§ ë¯¸ì™„ì„±! ë³µì‹ì—ì„œ 'ì›ì—… ì›ë°±'ì´ ìµìˆ™í•œ ì•Œëœ° í”Œë ˆì´ì–´.",
            3.5: "í…Œë‹ˆìŠ¤ ì‹¤ë ¥ ì í”„ ì¤‘: ì¼ê´€ì„±ê³¼ ì»¨íŠ¸ë¡¤ì„ ê°–ì¶”ê³  ìŠ¬ìŠ¬ ë„¤íŠ¸ í”Œë ˆì´ë„ ì‹œë„í•˜ëŠ” ë‹¨ê³„! 'ì € ì‚¬ëŒ ê½¤ ì¹˜ëŠ”ë°?' ì†Œë¦¬ ë“£ê¸° ì‹œì‘í•  ë•Œì£ .",
            4.0: "í…Œë‹ˆìŠ¤ ìˆ™ë ¨ì ì…ë¬¸: í¬í•¸ë“œ, ë°±í•¸ë“œ ëª¨ë‘ ê¹Šì´ì™€ ì»¨íŠ¸ë¡¤ì„ ê°–ì¶”ê³ , ì„œë¸Œë„ ì œë²• ë‚ ì¹´ë¡œìš´ ì•„ë§ˆì¶”ì–´ ê³ ìˆ˜! ê²Œì„ì˜ íë¦„ì„ ì½ê¸° ì‹œì‘í•©ë‹ˆë‹¤.",
            4.5: "í…Œë‹ˆìŠ¤ ì „ëµê°€ ì´ˆê¸‰: íŒŒì›Œ, ìŠ¤í•€, ì „ëµê¹Œì§€ ê²¸ë¹„í•œ í…Œë‹ˆìŠ¤ 'ê¾¼'! ê²Œì„ì„ ì´ëŒì–´ê°€ëŠ” ëŠ¥ë ¥ì´ ì¶œì¤‘í•˜ë©°, ì½”íŠ¸ì—ì„œ ìƒëŒ€ë°©ì„ ê´´ë¡­íˆê¸° ì‹œì‘í•©ë‹ˆë‹¤.",
            5.0: "í…Œë‹ˆìŠ¤ ì•„ë§ˆì¶”ì–´ ìµœê°•ì: ê°•ë ¥í•œ ê³µê²©ê³¼ ì •êµí•œ ê¸°ìˆ ì„ ê²¸ë¹„í•œ ì•„ë§ˆì¶”ì–´ ë ˆë²¨ì˜ ì •ì ! ì´ì œ ë™ë„¤ ì½”íŠ¸ì—ì„œëŠ” ì ìˆ˜ë¥¼ ì°¾ê¸° ì–´ë µì£ .",
            5.5: "í…Œë‹ˆìŠ¤ ì¤€í”„ë¡œì˜ ë²½: í”„ë¡œê¸‰ ê¸°ìˆ ê³¼ ì „ëµì„ ê°–ì¶”ê³  ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë©˜íƒˆì˜ ì†Œìœ ì! ì•„ë§ˆì¶”ì–´ì™€ í”„ë¡œì˜ ê²½ê³„ì— ì„œ ìˆìŠµë‹ˆë‹¤.",
            6.0: "í…Œë‹ˆìŠ¤ í”„ë¡œí˜ì…”ë„: êµ­ê°€ëŒ€í‘œ, ëŒ€í•™ ì„ ìˆ˜, ë˜ëŠ” ì„¸ê³„ë¥¼ ë¬´ëŒ€ë¡œ ë›°ëŠ” ì§„ì •í•œ í…Œë‹ˆìŠ¤ ìŠ¤íƒ€! ì´ë“¤ì€ ê·¸ëƒ¥ 'í…Œë‹ˆìŠ¤ ê·¸ ìì²´'ì…ë‹ˆë‹¤.",
            7.0: "í…Œë‹ˆìŠ¤ ì›”ë“œí´ë˜ìŠ¤: ì„¸ê³„ì  ìˆ˜ì¤€ì˜ í…Œë‹ˆìŠ¤ ìŠ¤íƒ€! ì´ì œ ë‹¹ì‹ ì€ í…Œë‹ˆìŠ¤ì˜ ì‹ ì´ ë˜ì—ˆìŠµë‹ˆë‹¤."
        };

        // ì•± ìƒíƒœ (ê¸°ì¡´ ë³€ìˆ˜ë“¤ ì œê±°í•˜ê³  ìœ„ì—ì„œ ì„ ì–¸í•œ ê²ƒ ì‚¬ìš©)
        let result = null;

        // ì§ˆë¬¸ í‚¤ ë°°ì—´
        const questionKeys = Object.keys(questions);

        // ì•± ë Œë”ë§ í•¨ìˆ˜
        function renderApp() {
            const app = document.getElementById('app');
            
            if (currentState === 'welcome') {
                renderWelcome(app);
            } else if (result) {
                renderResult(app);
            } else {
                renderQuestion(app);
            }
        }

        // í™˜ì˜ í™”ë©´ ë Œë”ë§
        function renderWelcome(app) {
            app.innerHTML = `
                <div class="welcome-screen">
                    <h1 class="welcome-title">ğŸš€ í…Œë‹ˆìŠ¤ ì‹¤ë ¥, ì–´ë””ê¹Œì§€ ì™”ë‹ˆ?</h1>
                    <p class="welcome-subtitle">NTRP í…ŒìŠ¤íŠ¸ë¡œ ë‹¹ì‹ ì˜ ë ˆë²¨ì„ ëª…í™•í•˜ê²Œ íŒŒì•…í•´ë³´ì„¸ìš”! ğŸ‘‹</p>
                    <div class="welcome-description">
                        <p>ì•ˆë…•í•˜ì„¸ìš”, í…Œë‹ˆìŠ¤ ì—´ì • ê°€ë“í•œ í”Œë ˆì´ì–´ë‹˜! ğŸ¤©</p>
                        <p>í˜¹ì‹œ ë‚´ í…Œë‹ˆìŠ¤ ì‹¤ë ¥ì´ ì–´ëŠ ì •ë„ì¸ì§€ ê¶ê¸ˆí•˜ì…¨ë‚˜ìš”? ğŸ¤” ì´ í…ŒìŠ¤íŠ¸ëŠ” ë‹¹ì‹ ì˜ í…Œë‹ˆìŠ¤ ì‹¤ë ¥ì„ ê°ê´€ì ìœ¼ë¡œ ê°€ëŠ í•´ë³¼ ìˆ˜ ìˆëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°íšŒì…ë‹ˆë‹¤! ë³µì¡í•œ ì„¤ëª… ì—†ì´, ëª‡ ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ë‹¹ì‹ ì˜ í˜„ì¬ NTRP ë ˆë²¨ì„ íŒŒì•…í•˜ê³ , ì•ìœ¼ë¡œ ì–´ë–¤ ë¶€ë¶„ì„ ì—°ìŠµí•˜ë©´ ì¢‹ì„ì§€ ë§ì¶¤í˜• ê°€ì´ë“œë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆì–´ìš”. ğŸ’¡</p>
                        <p>í¬í•¸ë“œ, ë°±í•¸ë“œ, ì„œë¸Œë¶€í„° ë°œë¦¬, í’‹ì›Œí¬, ì „ëµ, ì¼ê´€ì„±, ê·¸ë¦¬ê³  ë©˜íƒˆê¹Œì§€! ë‹¹ì‹ ì˜ ê°•ì ê³¼ ê°œì„ ì ì„ ë°œê²¬í•˜ê³  í•œ ë‹¨ê³„ ë” ì„±ì¥í•˜ëŠ” ê³„ê¸°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”. í…Œë‹ˆìŠ¤ ì—¬ì •ì˜ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìœ„í•œ ì²«ê±¸ìŒ, ì§€ê¸ˆ ì‹œì‘í•´ë´ìš”! ğŸ’ª</p>
                    </div>
                    <button class="start-btn" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
                </div>
            `;
        }

        // ì§ˆë¬¸ ë Œë”ë§
        function renderQuestion(app) {
            const currentQuestionKey = questionKeys[currentQuestionIndex];
            const currentQuestion = questions[currentQuestionKey];
            
            app.innerHTML = `
                <h1>ğŸ¾ í…Œë‹ˆìŠ¤ NTRP ë ˆë²¨ í…ŒìŠ¤íŠ¸</h1>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${((currentQuestionIndex + 1) / questionKeys.length) * 100}%"></div>
                </div>
                
                <div class="question-card">
                    <h2>ì§ˆë¬¸ ${currentQuestionIndex + 1} / ${questionKeys.length}</h2>
                    <p class="question">${currentQuestion.question}</p>
                    <p class="question-description">${currentQuestion.description}</p>
                    
                    <div class="options">
                        ${Object.entries(currentQuestion.levels).map(([score, description]) => `
                            <button class="option ${answers[currentQuestionKey] === parseInt(score) ? 'selected' : ''}" 
                                    onclick="selectAnswer('${currentQuestionKey}', ${score})">
                                <span class="score">${score}ì </span>
                                <span class="description">${description}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>

                <div class="navigation">
                    ${currentQuestionIndex > 0 ? `
                        <button class="nav-btn prev" onclick="previousQuestion()">ì´ì „</button>
                    ` : ''}
                    
                    ${currentQuestionIndex < questionKeys.length - 1 ? `
                        <button class="nav-btn next" onclick="nextQuestion()" 
                                ${!answers[currentQuestionKey] ? 'disabled' : ''}>ë‹¤ìŒ</button>
                    ` : `
                        <button class="nav-btn submit" onclick="calculateResult()" 
                                ${Object.keys(answers).length < questionKeys.length ? 'disabled' : ''}>ê²°ê³¼ ë³´ê¸°</button>
                    `}
                </div>
            `;
        }

        // ê²°ê³¼ ë Œë”ë§
        function renderResult(app) {
            app.innerHTML = `
                <h1>ğŸ¾ NTRP í…ŒìŠ¤íŠ¸ ê²°ê³¼</h1>
                <div class="result-card">
                    <h2>ë‹¹ì‹ ì˜ NTRP ë ˆë²¨ì€</h2>
                    <div class="ntrp-level">${result.ntrp_level}</div>
                    <p class="description">${result.description}</p>
                    <div class="stats">
                        <p>í‰ê·  ì ìˆ˜: ${result.average_score}/5</p>
                        <p>ì‘ë‹µí•œ ì§ˆë¬¸: ${result.total_questions}ê°œ</p>
                    </div>
                </div>
                
                <div class="detailed-analysis">
                    <h3>ğŸ“Š ìƒì„¸ ë¶„ì„</h3>
                    
                    <div class="category-scores">
                        <h4>ì˜ì—­ë³„ ì ìˆ˜</h4>
                        <div class="score-grid">
                            ${Object.entries(result.category_scores).map(([category, score]) => `
                                <div class="score-item">
                                    <span class="category-name">${category}</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: ${(score / 5) * 100}%"></div>
                                    </div>
                                    <span class="score-value">${score}/5</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="strengths-weaknesses">
                        ${result.strengths && result.strengths.length > 0 ? `
                            <div class="strengths">
                                <h4>ğŸ’ª ê°•ì </h4>
                                <ul>
                                    ${result.strengths.map(strength => `<li>${strength}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        
                        ${result.weaknesses && result.weaknesses.length > 0 ? `
                            <div class="weaknesses">
                                <h4>ğŸ¯ ê°œì„ ì </h4>
                                <ul>
                                    ${result.weaknesses.map(weakness => `<li>${weakness}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                    
                    ${result.improvement_suggestions ? `
                        <div class="improvement-suggestions">
                            <h4>ğŸ’¡ ê°œì„  ì œì•ˆ</h4>
                            <ul>
                                ${result.improvement_suggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                </div>
                
                <button class="restart-btn" onclick="restartTest()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
            `;
        }

        // í…ŒìŠ¤íŠ¸ ì‹œì‘
        function startTest() {
            currentState = 'quiz';
            currentQuestionIndex = 0;
            answers = {};
            result = null;
            renderApp();
        }

        // ë‹µë³€ ì„ íƒ
        function selectAnswer(questionKey, score) {
            answers[questionKey] = score;
            renderApp();
        }

        // ë‹¤ìŒ ì§ˆë¬¸
        function nextQuestion() {
            if (currentQuestionIndex < questionKeys.length - 1) {
                currentQuestionIndex++;
                renderApp();
            }
        }

        // ì´ì „ ì§ˆë¬¸
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderApp();
            }
        }

        // ê²°ê³¼ ê³„ì‚°
        function calculateResult() {
            const totalScore = Object.values(answers).reduce((sum, score) => sum + score, 0);
            const averageScore = totalScore / Object.keys(answers).length;
            
            // NTRP ë ˆë²¨ ê²°ì •
            let ntrpLevel;
            if (averageScore <= 1.25) ntrpLevel = 1.0;
            else if (averageScore <= 1.75) ntrpLevel = 1.5;
            else if (averageScore <= 2.25) ntrpLevel = 2.0;
            else if (averageScore <= 2.75) ntrpLevel = 2.5;
            else if (averageScore <= 3.25) ntrpLevel = 3.0;
            else if (averageScore <= 3.75) ntrpLevel = 3.5;
            else if (averageScore <= 4.25) ntrpLevel = 4.0;
            else if (averageScore <= 4.75) ntrpLevel = 4.5;
            else ntrpLevel = 5.0; // 4.75 ì´ˆê³¼ì¼ ê²½ìš° 5.0

            // ìƒì„¸ ë¶„ì„
            const categoryNames = {
                "forehand": "í¬í•¸ë“œ",
                "backhand": "ë°±í•¸ë“œ",
                "serve": "ì„œë¸Œ",
                "volley": "ë°œë¦¬",
                "footwork": "í’‹ì›Œí¬",
                "strategy": "ì „ëµ",
                "consistency": "ì¼ê´€ì„±",
                "mental": "ë©˜íƒˆ"
            };

            const categoryScores = {};
            Object.keys(categoryNames).forEach(category => {
                if (answers[category]) {
                    categoryScores[categoryNames[category]] = answers[category];
                }
            });

            // ê°•ì ê³¼ ì•½ì  ë¶„ì„
            const strengths = [];
            const weaknesses = [];
            Object.entries(categoryScores).forEach(([category, score]) => {
                if (score >= 4) strengths.push(category);
                else if (score <= 2) weaknesses.push(category);
            });

            // ê°œì„  ì œì•ˆ
            const improvementSuggestions = [];
            if (weaknesses.includes("í¬í•¸ë“œ")) {
                improvementSuggestions.push("í¬í•¸ë“œ ê¸°ë³¸ê¸° ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ìŠ¤ìœ™ í¼ê³¼ íƒ€ì ì„ ì¤‘ì ì ìœ¼ë¡œ ì—°ìŠµí•´ë³´ì„¸ìš”.");
            }
            if (weaknesses.includes("ë°±í•¸ë“œ")) {
                improvementSuggestions.push("ë°±í•¸ë“œ ê·¸ë¦½ê³¼ ì¤€ë¹„ ë™ì‘ì„ ì—°ìŠµí•´ë³´ì„¸ìš”. ë°±í•¸ë“œë¥¼ í”¼í•˜ì§€ ë§ê³  ì ê·¹ì ìœ¼ë¡œ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì„œë¸Œ")) {
                improvementSuggestions.push("ì„œë¸Œ ì—°ìŠµì„ í†µí•´ ì •í™•ì„±ê³¼ íŒŒì›Œë¥¼ í–¥ìƒì‹œì¼œë³´ì„¸ìš”. ì„¸ì»¨ë“œ ì„œë¸Œë¶€í„° ì•ˆì •í™”í•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ë°œë¦¬")) {
                improvementSuggestions.push("ë„¤íŠ¸ í”Œë ˆì´ì— ìµìˆ™í•´ì§€ì„¸ìš”. ê°„ë‹¨í•œ ë°œë¦¬ë¶€í„° ì‹œì‘í•´ì„œ ì ì§„ì ìœ¼ë¡œ ë°œì „ì‹œí‚¤ì„¸ìš”.");
            }
            if (weaknesses.includes("í’‹ì›Œí¬")) {
                improvementSuggestions.push("ê¸°ë³¸ì ì¸ ì´ë™ ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ì‚¬ì´ë“œ ìŠ¤í…ê³¼ í¬ë¡œìŠ¤ì˜¤ë²„ ìŠ¤í…ì„ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì „ëµ")) {
                improvementSuggestions.push("ê²Œì„ ì¤‘ ìƒëŒ€ë°©ì„ ê´€ì°°í•˜ê³  ì•½ì ì„ ì°¾ì•„ë³´ì„¸ìš”. ë‹¤ì–‘í•œ ìƒ· ì¡°í•©ì„ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì¼ê´€ì„±")) {
                improvementSuggestions.push("ì•ˆì •ì ì¸ ìƒ·ì„ ìœ„í•´ ê¸°ë³¸ê¸°ë¥¼ íƒ„íƒ„íˆ í•˜ì„¸ìš”. ì—ëŸ¬ë¥¼ ì¤„ì´ëŠ” ì—°ìŠµì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");
            }
            if (weaknesses.includes("ë©˜íƒˆ")) {
                improvementSuggestions.push("ì••ë°•ê°ì— ëŒ€ì²˜í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ì‹¤ìˆ˜ë¥¼ í•´ë„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ë§ˆìŒê°€ì§ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");
            }
            if (improvementSuggestions.length === 0) {
                improvementSuggestions.push("ì „ë°˜ì ìœ¼ë¡œ ì¢‹ì€ ì‹¤ë ¥ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë” ë†’ì€ ë ˆë²¨ì„ ìœ„í•´ ê³ ê¸‰ ê¸°ìˆ ì„ ì—°ìŠµí•´ë³´ì„¸ìš”.");
            }

            result = {
                ntrp_level: ntrpLevel,
                description: ntrpDescriptions[ntrpLevel] || "ì •ì˜ë˜ì§€ ì•Šì€ ë ˆë²¨",
                average_score: Math.round(averageScore * 10) / 10,
                total_questions: Object.keys(answers).length,
                category_scores: categoryScores,
                strengths: strengths,
                weaknesses: weaknesses,
                improvement_suggestions: improvementSuggestions
            };

            renderApp();
        }

        // í…ŒìŠ¤íŠ¸ ì¬ì‹œì‘
        function restartTest() {
            currentState = 'welcome';
            currentQuestionIndex = 0;
            answers = {};
            result = null;
            renderApp();
        }

        // ì•± ì´ˆê¸°í™”
        renderApp();
    </script>
</body>
</html>
