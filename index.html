<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¾ í…Œë‹ˆìŠ¤ NTRP ë ˆë²¨ í…ŒìŠ¤íŠ¸</title>
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6A11CB 0%, #2575FC 100%);
            --primary-color-start: #6A11CB;
            --primary-color-end: #2575FC;
            --text-dark: #222;
            --text-medium: #555;
            --text-light: #777;
            --bg-light: #f8f9fa;
            --border-light: #e0e0e0;
            --shadow-light: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 15px 45px rgba(0, 0, 0, 0.15);
            --shadow-button-hover: 0 10px 25px rgba(106, 17, 203, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: var(--shadow-medium);
            max-width: 650px;
            width: 100%;
            text-align: center;
            margin: 20px;
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        h1 {
            color: var(--text-dark);
            margin-bottom: 30px;
            font-size: 2.8rem;
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: -0.03em;
        }
        
        h1 .emoji {
            display: inline-block;
            margin-right: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border-light);
            border-radius: 5px;
            margin-bottom: 35px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 5px;
        }

        /* Question card and option spacing/sizing adjustments */
        .question-card {
            margin-bottom: 20px;
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .question-card h2 {
            color: var(--text-medium);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .question {
            font-size: 1.5rem;
            color: var(--text-dark);
            margin-bottom: 10px;
            line-height: 1.4;
            font-weight: 600;
        }

        .question-description {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 25px;
            line-height: 1.5;
            font-style: normal;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px; /* Reduced gap */
            margin-bottom: 15px;
        }

        .option {
            display: flex;
            align-items: center; /* í•µì‹¬: ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            padding: 12px 20px; /* Reduced padding */
            border: 2px solid var(--border-light);
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            min-height: 50px; /* Reduced min-height */
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.04);
        }

        .option:hover {
            border-color: var(--primary-color-start);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }

        .option.selected {
            border-color: var(--primary-color-end);
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(106, 17, 203, 0.3);
        }

        /* Score display removed, so .option .score style is now unused */
        /* .option .score { display: none; } */ 

        .option .description {
            flex: 1; /* Takes up remaining space */
            font-size: 0.95rem; /* Slightly reduced font size */
            line-height: 1.4;
            display: flex;
            align-items: center; /* Ensures text remains vertically centered */
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 15px;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .nav-btn.prev {
            background: var(--bg-light);
            color: var(--text-medium);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.06);
        }

        .nav-btn.prev:hover {
            background: #e0e0e0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.09);
        }

        .nav-btn.next,
        .nav-btn.submit {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }

        .nav-btn.next:hover,
        .nav-btn.submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-card {
            background: var(--primary-gradient);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: var(--shadow-medium);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-card h2 {
            margin-bottom: 20px;
            font-size: 1.6rem;
        }

        .ntrp-level {
            font-size: 4.5rem;
            font-weight: 800;
            margin: 20px 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            line-height: 1;
        }

        .description {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .stats p {
            margin: 5px 0;
            font-size: 1rem;
        }

        .detailed-analysis {
            background: var(--bg-light);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            text-align: left;
            box-shadow: var(--shadow-light);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .detailed-analysis h3 {
            color: var(--text-dark);
            margin-bottom: 25px;
            font-size: 1.6rem;
            font-weight: 600;
            text-align: center;
        }

        .detailed-analysis h4 {
            color: var(--text-medium);
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
        }

        /* Score Grid (2 columns for desktop) */
        .score-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 columns for desktop */
            gap: 12px;
            margin-bottom: 25px;
        }

        .score-item {
            display: flex;
            align-items: center; /* Vertically centers content within item */
            gap: 10px;
            padding: 14px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.04);
        }

        .category-name {
            min-width: 70px;
            font-weight: 600;
            color: var(--text-dark);
            text-align: left;
            flex-shrink: 0;
            font-size: 0.95rem;
        }

        .score-bar {
            flex-grow: 1;
            height: 12px;
            background: var(--border-light);
            border-radius: 6px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 6px;
        }

        .score-value {
            min-width: 35px;
            font-weight: 600;
            color: var(--text-dark);
            text-align: right;
            flex-shrink: 0;
            font-size: 0.95rem;
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .strengths, .weaknesses {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
            text-align: center;
        }

        .strengths h4 {
            color: #28a745;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .weaknesses h4 {
            color: #dc3545;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .strengths ul, .weaknesses ul {
            list-style: none;
            padding: 0;
        }

        .strengths li, .weaknesses li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-size: 1rem;
            color: var(--text-medium);
            line-height: 1.4;
        }

        .strengths li:last-child, .weaknesses li:last-child {
            border-bottom: none;
        }

        .improvement-suggestions {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
            text-align: center;
            margin-top: 20px;
        }

        .improvement-suggestions h4 {
            color: #007bff;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .improvement-suggestions ul {
            list-style: none;
            padding: 0;
        }

        .improvement-suggestions li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            line-height: 1.6;
            font-size: 1rem;
            color: var(--text-medium);
        }

        .improvement-suggestions li:last-child {
            border-bottom: none;
        }

        .restart-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.4);
        }

        /* Welcome Screen Styles */
        .welcome-screen {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .welcome-title {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary-color-start);
            margin-bottom: 15px;
            line-height: 1.2;
            letter-spacing: -0.04em;
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }

        .welcome-subtitle {
            font-size: 1.3rem;
            color: var(--text-medium);
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 400;
        }

        .welcome-description {
            font-size: 1rem;
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: center;
            max-width: 500px;
        }

        .start-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 16px 45px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(106, 17, 203, 0.35);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.02em;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(106, 17, 203, 0.45);
        }

        /* Coupang Ad Style */
        .coupang-ad-container {
            margin-top: 25px;
            margin-bottom: 5px;
            text-align: center;
            width: 100%;
        }
        .coupang-ad-container iframe {
            max-width: 100%;
            height: 44px;
            border-radius: 8px;
            overflow: hidden;
        }

        /* Coupang Disclosure Style */
        .coupang-disclosure {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 10px;
            text-align: center;
            line-height: 1.3;
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
                min-height: 95vh;
            }
            
            h1 {
                font-size: 2rem;
                margin-bottom: 20px;
            }
            
            .question-card h2 {
                font-size: 1rem;
            }
            
            .question {
                font-size: 1.3rem;
                margin-bottom: 8px;
            }
            
            .question-description {
                font-size: 0.85rem;
                margin-bottom: 20px;
            }
            
            .options {
                gap: 8px;
                margin-bottom: 15px;
            }
            
            .option {
                padding: 12px 15px;
                min-height: 50px;
                border-radius: 10px;
            }
            
            .option .description { /* scoreê°€ display: noneì´ë¯€ë¡œ ì§ì ‘ ì ‘ê·¼ */
                font-size: 0.85rem;
            }
            
            .nav-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .result-card {
                padding: 25px;
            }
            
            .result-card h2 {
                font-size: 1.3rem;
            }
            
            .ntrp-level {
                font-size: 3rem;
            }
            
            .description {
                font-size: 1rem;
            }
            
            .stats p {
                font-size: 0.85rem;
            }
            
            .detailed-analysis {
                padding: 20px;
            }
            
            .detailed-analysis h3 {
                font-size: 1.4rem;
                margin-bottom: 15px;
            }
            
            .detailed-analysis h4 {
                font-size: 1rem;
                margin-bottom: 10px;
            }
            
            /* ëª¨ë°”ì¼ì—ì„œ score-gridëŠ” ë‹¤ì‹œ 1ì—´ë¡œ */
            .score-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            /* ëª¨ë°”ì¼ì—ì„œ score-item ë‚´ë¶€ ì •ë ¬ ë‹¤ì‹œ ì„¤ì • */
            .score-item {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                gap: 8px;
                padding: 10px 15px;
            }
            
            .category-name {
                min-width: auto;
                text-align: left;
                margin-bottom: 0;
                font-size: 0.9rem;
            }
            
            .score-bar {
                flex-grow: 1;
                height: 10px;
            }
            
            .score-value {
                min-width: auto;
                text-align: right;
                margin-top: 0;
                font-size: 0.9rem;
            }

            .strengths-weaknesses {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .strengths, .weaknesses, .improvement-suggestions {
                padding: 15px;
            }
            
            .strengths h4, .weaknesses h4, .improvement-suggestions h4 {
                font-size: 1rem;
            }
            
            .strengths ul, .weaknesses ul, .improvement-suggestions ul {
                font-size: 0.85rem;
                line-height: 1.4;
            }
            
            .restart-btn {
                padding: 12px 25px;
                font-size: 1rem;
                margin-top: 20px;
            }

            /* Welcome Screen Responsive */
            .welcome-title {
                font-size: 1.8rem;
                margin-bottom: 10px;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
                margin-bottom: 15px;
            }
            
            .welcome-description {
                font-size: 0.85rem;
                margin-bottom: 25px;
            }
            
            .start-btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            .coupang-disclosure {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- ì•± ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
    </div>

    <script>
        // ì•± ìƒíƒœ ê´€ë¦¬
        let currentState = 'welcome'; // 'welcome', 'quiz', 'result'
        let currentQuestionIndex = 0;
        let answers = {};

        // NTRP ì§ˆë¬¸ ë°ì´í„°
        const questions = {
            "forehand": {
                "question": "í¬í•¸ë“œë¥¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "í¬í•¸ë“œì˜ ë°©í–¥ ì œì–´ì™€ ê¹Šì´ ì¡°ì ˆ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê³µ ë•Œë¦¬ê¸°ë„ ê¸‰ê¸‰! ë¼ì¼“ì— ë§ìœ¼ë©´ ë‹¤í–‰ì´ì£ . ğŸ˜…",
                    2: "ê°„ë‹¨í•œ ë°©í–¥(ëŒ€ì¶© ì €~ìª½)ì€ ì–´ì©Œë‹¤ ê°€ëŠ¥í•´ìš”. ê°€ë” ì˜ˆìƒì¹˜ ëª»í•œ ê³³ìœ¼ë¡œ! ï¿½", 
                    3: "ì¤‘ê°„ ì†ë„ ê³µì€ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ì²™ì²™! ë‚˜ë¦„ ì»¨íŠ¸ë¡¤ ê°€ëŠ¥! ğŸ˜‰",
                    4: "ê¹Šì´ì™€ ë°©í–¥ì„ ììœ ìì¬ë¡œ ì¡°ì ˆ! ìƒëŒ€ ì½”íŠ¸ êµ¬ì„êµ¬ì„ì„ ë…¸ë ¤ìš”. ğŸŒŸ", 
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ ì •í™•í•œ í¬í•¸ë“œë¡œ ê²Œì„ ì§€ë°°! ì—­ì‹œ í•„ìŠ¹! ğŸ’ª"
                }
            },
            "backhand": {
                "question": "ë°±í•¸ë“œë¥¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ë°±í•¸ë“œì˜ ì¼ê´€ì„±ê³¼ ë°©í–¥ ì œì–´ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ë°±í•¸ë“œë§Œ ì˜¤ë©´ ëª¸ë¶€í„° ëŒë ¤ í¬í•¸ë“œë¡œ ëƒ…ë‹¤ ì³ìš”. ë‚˜ì˜ ìˆ™ì œ! ğŸ˜­",
                    2: "ë°±í•¸ë“œë¥¼ ì¹˜ê¸´ í•˜ëŠ”ë° ë„¤íŠ¸í–‰ì´ê±°ë‚˜ ì—‰ëš±í•œ ë°©í–¥ìœ¼ë¡œ ê°€ìš”. ì‚ë—ì‚ë—! ğŸ˜¥",
                    3: "ì¤‘ê°„ ì†ë„ ê³µì€ ë°±í•¸ë“œë¡œë„ ê½¤ ì•ˆì •ì ! ì´ì œ ì¢€ í¼ì´ ë‚˜ëŠ” ë“¯? ğŸ˜Š",
                    4: "ë°±í•¸ë“œë¡œë„ ë°©í–¥/ê¹Šì´ ììœ ìì¬! ìƒëŒ€ë°©ì´ ì•½ì ì¸ ì¤„ ì•Œì•˜ëŒ€ìš”. ğŸ˜",
                    5: "í¬í•¸ë“œë§Œí¼ ê°•ë ¥í•˜ê³  ì •í™•í•œ ë°±í•¸ë“œë¡œ ìƒëŒ€ë¥¼ ì••ë„! ë°±í•¸ë“œë§ˆìŠ¤í„°! ğŸš€"
                }
            },
            "serve": {
                "question": "ì„œë¸Œì˜ ì •í™•ì„±ê³¼ íŒŒì›ŒëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                "description": "ì²« ì„œë¸Œì™€ ì„¸ì»¨ë“œ ì„œë¸Œì˜ ì„±ê³µë¥ ê³¼ íš¨ê³¼ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ì¼ë‹¨ ì„œë¸Œ ë„£ê¸°ë§Œ í•´ë„ ê°ì§€ë•ì§€! ë”ë¸” í´íŠ¸ëŠ” ê¸°ë³¸ì´ì£ . ğŸ˜¥",
                    2: "ì„¸ì»¨ë“œ ì„œë¸ŒëŠ” ì–´ë–»ê²Œë“  ì½”íŠ¸ ì•ˆì— ë„£ì–´ìš”. ì²« ì„œë¸ŒëŠ” ëª¨í—˜! ğŸ¤",
                    3: "ì²« ì„œë¸Œë„ ê°€ë” ë²ˆê°œì²˜ëŸ¼ ê½‚íˆê³ , ì„¸ì»¨ë“œ ì„œë¸Œë„ ì•ˆì •ì ! âš¡",
                    4: "ê°•ë ¥í•œ íŒŒì›Œì™€ ë‚ ì¹´ë¡œìš´ ì •í™•ì„±! ì„œë¸Œ ì—ì´ìŠ¤ ì œì¡°ê¸°! ğŸ’¥",
                    5: "ì••ë°•ê° ì†ì—ì„œë„ ì—ì´ìŠ¤ ê½‚ëŠ” ë¯¿ìŒì§í•œ ì„œë¸Œ! ì„œë¸ŒëŠ” ê³§ ë“ì ! ğŸ’¯"
                }
            },
            "volley": {
                "question": "ë°œë¦¬ì™€ ë„¤íŠ¸ í”Œë ˆì´ë¥¼ í•  ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ë„¤íŠ¸ì—ì„œì˜ í¸ì•ˆí•¨ê³¼ ë°œë¦¬ ë“ì  ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ë„¤íŠ¸ ê·¼ì²˜ ê°€ëŠ” ê±´ ì¢€... ê³µì´ ë¬´ì„œì›Œìš”. ğŸ˜­",
                    2: "ê°„ë‹¨í•˜ê²Œ ë„¤íŠ¸ ì•ì—ì„œ ê³µ ë°›ì•„ ë„˜ê¸°ëŠ” ì •ë„ëŠ” í•´ìš”. íˆ­! ğŸ˜…",
                    3: "í¬í•¸ë“œ ë°œë¦¬ëŠ” ê½¤ ìì‹  ìˆì–´ìš”! ë°±í•¸ë“œëŠ” ì•„ì§ ì—°ìŠµ ì¤‘... ğŸ¤”",
                    4: "ë°œë¦¬ë¡œ í¬ì¸íŠ¸ë¥¼ ì§ì ‘ ë”°ë‚¼ ìˆ˜ ìˆì–´ìš”! ë„¤íŠ¸ëŠ” ë‚˜ì˜ êµ¬ì—­! ğŸ°",
                    5: "ë„¤íŠ¸ ì•ì—ì„œ ìƒëŒ€ë¥¼ ì••ë°•í•˜ê³  ë°œë¦¬ë¡œ ê²Œì„ì„ ëëƒ…ë‹ˆë‹¤! ë°œë¦¬ì˜ ë§ˆë²•ì‚¬! ğŸ’«"
                }
            },
            "footwork": {
                "question": "í’‹ì›Œí¬ì™€ ì½”íŠ¸ ì»¤ë²„ë¦¬ì§€ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                "description": "ì½”íŠ¸ ì´ë™ê³¼ í¬ì§€ì…”ë‹ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê³µì´ ì˜¤ë©´ ë©... ê³µ ë”°ë¼ê°€ëŠ” ê²ƒë„ ë²„ê±°ì›Œìš”. ğŸ˜¥",
                    2: "ê¸°ë³¸ì ì¸ ì¢Œìš° ì´ë™ì€ í•˜ì§€ë§Œ, ë¹ ë¥´ì§„ ì•Šì•„ìš”. ì˜ì°¨ì˜ì°¨! ğŸš¶",
                    3: "ì½”íŠ¸ ë„“ì´ë¥¼ ì–´ëŠ ì •ë„ ì»¤ë²„í•´ìš”. ì´ì œ ì¢€ í…Œë‹ˆìŠ¤ ì„ ìˆ˜ ê°™ì•„ìš”! ğŸƒ",
                    4: "ë‚ ë µí•œ í’‹ì›Œí¬ë¡œ ì½”íŠ¸ êµ¬ì„êµ¬ì„ì„ ëˆ„ë²¼ìš”! íœ™íœ™! ğŸ’¨",
                    5: "í”„ë¡œ ì„ ìˆ˜ì²˜ëŸ¼ ì½”íŠ¸ ì „ì²´ë¥¼ ì§€ë°°í•˜ëŠ” í’‹ì›Œí¬ì™€ í¬ì§€ì…”ë‹! ì½”íŠ¸ì˜ ì§€ë°°ì! ğŸ‘‘"
                }
            },
            "strategy": {
                "question": "ê²Œì„ ì „ëµì„ ì„¸ìš°ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ìƒëŒ€ë°© ë¶„ì„ê³¼ ì „ëµì  ì‚¬ê³  ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ê·¸ëƒ¥ ê³µë§Œ ì¹˜ë©´ ë˜ëŠ” ê±° ì•„ë‹Œê°€ìš”? ì „ëµì€ ë­”ê°€ìš”? ğŸ¤·",
                    2: "ìƒëŒ€ë°© ì•½ì ì„ ëŒ€ì¶© ë…¸ë ¤ë³¼ê¹Œ...? ì •ë„ëŠ” ìƒê°í•´ìš”. ğŸ§",
                    3: "ìƒëŒ€ ì•½ì  íŒŒì•…í•˜ê³  ê±°ê¸°ì— ë§ì¶° ê³µê²© ì‹œë„! ì œë²• ì „ëµì ! ğŸ¯",
                    4: "ê²Œì„ì„ ì˜ˆì¸¡í•˜ê³  ìƒí™©ì— ë”°ë¼ ì „ëµì„ ìœ ì—°í•˜ê²Œ ë°”ê¿”ìš”! ì´ê¸°ëŠ” ê²Œì„ì€ ì „ëµ ì‹¸ì›€! ğŸ§ ",
                    5: "ì–´ë–¤ ìƒëŒ€ë°©ë„ ì™„ë²½ ë¶„ì„, ë§ì¶¤ ì „ëµìœ¼ë¡œ ìŠ¹ë¦¬ ìŸì·¨! í…Œë‹ˆìŠ¤ ë¸Œë ˆì¸! ğŸ’¡"
                }
            },
            "consistency": {
                "question": "ì¼ê´€ì„± ìˆê²Œ ë ë¦¬ë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆë‚˜ìš”?",
                "description": "ì•ˆì •ì ì¸ ìƒ·ê³¼ ì—ëŸ¬ ê´€ë¦¬ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "3ë²ˆ ì´ìƒ ë ë¦¬ ì´ì–´ê°€ë©´ ê¸°ì ! ë‚´ ê³µì€ ì–´ë””ë¡œ... ğŸ˜µâ€ğŸ’«",
                    2: "ê³µì€ ë„˜ê¸°ëŠ”ë°, ì†ë„ëŠ” ì¢€ ëŠë ¤ìš” ğŸ¢", // ë¬¸êµ¬ ìˆ˜ì • ë° ì´ëª¨ì§€ ë³€ê²½
                    3: "ì¤‘ê°„ ì†ë„ ë ë¦¬ëŠ” ê½¤ ì•ˆì •ì ! ì´ì œ ì¢€ ë ë¦¬ ë§›ì´ ë‚˜ë„¤ìš”! ğŸ‘",
                    4: "ë¹ ë¥¸ í˜ì´ìŠ¤ì—ì„œë„ ì•ˆì •ì ! ì¢€ì²˜ëŸ¼ ì‹¤ìˆ˜í•˜ì§€ ì•Šì£ . ğŸ›¡ï¸",
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¼ ì—†ëŠ” ì™„ë²½í•œ ì¼ê´€ì„±! ë²½ì¹˜ê¸° ì¥ì¸! ğŸ§±"
                }
            },
            "mental": {
                "question": "ê²Œì„ ì¤‘ ë©˜íƒˆ ê´€ë¦¬ê°€ ì˜ ë˜ë‚˜ìš”?",
                "description": "ì••ë°•ê°ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œì˜ ëŒ€ì²˜ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.",
                "levels": {
                    1: "ì‹¤ìˆ˜ í•œ ë²ˆ í•˜ë©´ ë¼ì¼“ ë˜ì§€ê³  ì‹¶ì–´ì ¸ìš”. ë°”ë¡œ ë©˜íƒˆ ë¶•ê´´! ğŸ¤¯",
                    2: "ê°„ë‹¨í•œ ê²Œì„ì€ ê´œì°®ì€ë°, ì§€ê³  ìˆìœ¼ë©´ í‘œì • ê´€ë¦¬ê°€ ì•ˆ ë¼ìš”. ğŸ˜ ",
                    3: "ì–´ëŠ ì •ë„ ì••ë°•ê°ì— ëŒ€ì²˜ ê°€ëŠ¥! ê·¸ë˜ë„ ì†ì€ ë¶€ê¸€ë¶€ê¸€... ğŸ˜¤",
                    4: "ì¤‘ìš”í•œ ìˆœê°„ì—ë„ ì¹¨ì°©í•˜ê³  ëƒ‰ì •í•¨ ìœ ì§€! ê°•ì²  ë©˜íƒˆ! ğŸ’",
                    5: "ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ì™„ë²½ ë©˜íƒˆë¡œ ìƒëŒ€ë¥¼ ì••ë„! ë©˜íƒˆ ê°‘! ğŸ‘‘"
                }
            }
        };

        // NTRP ë ˆë²¨ë³„ ìœ„íŠ¸ ìˆëŠ” ì„¤ëª…
        const ntrpDescriptions = {
            1.0: "í…Œë‹ˆìŠ¤ ì‹ ìƒì•„: ë¼ì¼“ì„ ì¡ê³  ì½”íŠ¸ì— ì²«ë°œì„ ë‚´ë””ë”˜ ë‹¹ì‹ ! í…Œë‹ˆìŠ¤ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",
            1.5: "í…Œë‹ˆìŠ¤ ê±¸ìŒë§ˆ: ê³µì„ ë•Œë¦¬ê³ ëŠ” ìˆëŠ”ë°, ì–´ë””ë¡œ ê°ˆì§€ëŠ” ê³µë§Œ ì•„ëŠ” ë‹¨ê³„! ì¼ë‹¨ ê³µì„ ë„˜ê¸°ëŠ” ê²Œ ëª©í‘œì£ .",
            2.0: "í…Œë‹ˆìŠ¤ ì´ˆê¸‰ ëª¨í—˜ê°€: ê³µì„ ë„˜ê¸°ê¸° ì‹œì‘í–ˆì§€ë§Œ, ì•„ì§ ê¸°ë³¸ê¸°ê°€ ì‹œê¸‰í•œ í…Œë¦°ì´! ë ë¦¬ëŠ” ì§§ì§€ë§Œ, ì—´ì •ì€ ë§Œë ™!",
            2.5: "í…Œë‹ˆìŠ¤ ê¸¸ì°¾ê¸° ì¤‘: ì–´ì„¤í”„ê²Œ ê³µì€ ì¹˜ì§€ë§Œ, ì–´ë””ë¡œ ê°ˆì§€, ì™œ ì´ë ‡ê²Œ ì–´ë ¤ìš´ì§€ ê³ ë¯¼ì´ ë§ì€ ë‹¨ê³„. ê·¸ë˜ë„ ë ë¦¬ì˜ ë§›ì„ ì¡°ê¸ˆì”© ì•Œì•„ê°€ì£ !",
            3.0: "í…Œë‹ˆìŠ¤ ê¸°ë³¸ ë‹¤ì§€ê¸°: ì´ì œ ê³µì€ ì›¬ë§Œí¼ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë³´ë‚´ì§€ë§Œ, ê¹Šì´ë‚˜ íŒŒì›ŒëŠ” ì•„ì§ ë¯¸ì™„ì„±! ë³µì‹ì—ì„œ 'ì›ì—… ì›ë°±'ì´ ìµìˆ™í•œ ì•Œëœ° í”Œë ˆì´ì–´.",
            3.5: "í…Œë‹ˆìŠ¤ ì‹¤ë ¥ ì í”„ ì¤‘: ì¼ê´€ì„±ê³¼ ì»¨íŠ¸ë¡¤ì„ ê°–ì¶”ê³  ìŠ¬ìŠ¬ ë„¤íŠ¸ í”Œë ˆì´ë„ ì‹œë„í•˜ëŠ” ë‹¨ê³„! 'ì € ì‚¬ëŒ ê½¤ ì¹˜ëŠ”ë°?' ì†Œë¦¬ ë“£ê¸° ì‹œì‘í•  ë•Œì£ .",
            4.0: "í…Œë‹ˆìŠ¤ ìˆ™ë ¨ì ì…ë¬¸: í¬í•¸ë“œ, ë°±í•¸ë“œ ëª¨ë‘ ê¹Šì´ì™€ ì»¨íŠ¸ë¡¤ì„ ê°–ì¶”ê³ , ì„œë¸Œë„ ì œë²• ë‚ ì¹´ë¡œìš´ ì•„ë§ˆì¶”ì–´ ê³ ìˆ˜! ê²Œì„ì˜ íë¦„ì„ ì½ê¸° ì‹œì‘í•©ë‹ˆë‹¤.",
            4.5: "í…Œë‹ˆìŠ¤ ì „ëµê°€ ì´ˆê¸‰: íŒŒì›Œ, ìŠ¤í•€, ì „ëµê¹Œì§€ ê²¸ë¹„í•œ í…Œë‹ˆìŠ¤ 'ê¾¼'! ê²Œì„ì„ ì´ëŒì–´ê°€ëŠ” ëŠ¥ë ¥ì´ ì¶œì¤‘í•˜ë©°, ì½”íŠ¸ì—ì„œ ìƒëŒ€ë°©ì„ ê´´ë¡­íˆê¸° ì‹œì‘í•©ë‹ˆë‹¤.",
            5.0: "í…Œë‹ˆìŠ¤ ì•„ë§ˆì¶”ì–´ ìµœê°•ì: ê°•ë ¥í•œ ê³µê²©ê³¼ ì •êµí•œ ê¸°ìˆ ì„ ê²¸ë¹„í•œ ì•„ë§ˆì¶”ì–´ ë ˆë²¨ì˜ ì •ì ! ì´ì œ ë™ë„¤ ì½”íŠ¸ì—ì„œëŠ” ì ìˆ˜ë¥¼ ì°¾ê¸° ì–´ë µì£ .",
            5.5: "í…Œë‹ˆìŠ¤ ì¤€í”„ë¡œì˜ ë²½: í”„ë¡œê¸‰ ê¸°ìˆ ê³¼ ì „ëµì„ ê°–ì¶”ê³  ì–´ë–¤ ìƒí™©ì—ì„œë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë©˜íƒˆì˜ ì†Œìœ ì! ì•„ë§ˆì¶”ì–´ì™€ í”„ë¡œì˜ ê²½ê³„ì— ì„œ ìˆìŠµë‹ˆë‹¤.",
            6.0: "í…Œë‹ˆìŠ¤ í”„ë¡œí˜ì…”ë„: êµ­ê°€ëŒ€í‘œ, ëŒ€í•™ ì„ ìˆ˜, ë˜ëŠ” ì„¸ê³„ë¥¼ ë¬´ëŒ€ë¡œ ë›°ëŠ” ì§„ì •í•œ í…Œë‹ˆìŠ¤ ìŠ¤íƒ€! ì´ë“¤ì€ ê·¸ëƒ¥ 'í…Œë‹ˆìŠ¤ ê·¸ ìì²´'ì…ë‹ˆë‹¤.",
            7.0: "í…Œë‹ˆìŠ¤ ì›”ë“œí´ë˜ìŠ¤: ì„¸ê³„ì  ìˆ˜ì¤€ì˜ í…Œë‹ˆìŠ¤ ìŠ¤íƒ€! ì´ì œ ë‹¹ì‹ ì€ í…Œë‹ˆìŠ¤ì˜ ì‹ ì´ ë˜ì—ˆìŠµë‹ˆë‹¤."
        };

        // ì•± ìƒíƒœ ê´€ë¦¬
        let result = null;

        // ì§ˆë¬¸ í‚¤ ë°°ì—´
        const questionKeys = Object.keys(questions);

        // ì•± ë Œë”ë§ í•¨ìˆ˜
        function renderApp() {
            const app = document.getElementById('app');
            
            if (currentState === 'welcome') {
                renderWelcome(app);
            } else if (result) {
                renderResult(app);
            } else {
                renderQuestion(app);
            }
        }

        // í™˜ì˜ í™”ë©´ ë Œë”ë§
        function renderWelcome(app) {
            app.innerHTML = `
                <div class="welcome-screen">
                    <h1 class="welcome-title"><span class="emoji">ğŸŒ </span> ë‹¹ì‹ ì˜ í…Œë‹ˆìŠ¤ ë ˆë²¨ì€?</h1>
                    <p class="welcome-subtitle">ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¡œ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”! <span class="emoji">ğŸš€</span></p>
                    <div class="welcome-description">
                        <p>ë‚´ í…Œë‹ˆìŠ¤ ì‹¤ë ¥ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?<br>
                        ì´ í…ŒìŠ¤íŠ¸ëŠ” ë‹¹ì‹ ì˜ NTRP ë ˆë²¨ì„ ì‰½ê³  ì¬ë¯¸ìˆê²Œ ì§„ë‹¨í•´ ë“œë¦½ë‹ˆë‹¤.<br>
                        ëª‡ ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•˜ê³ ,<br>
                        í¬í•¸ë“œë¶€í„° ë©˜íƒˆê¹Œì§€ ë‹¹ì‹ ì˜ ê°•ì ê³¼ ê°œì„ ì ì„ í•œëˆˆì— í™•ì¸í•´ë³´ì„¸ìš”! <span class="emoji">ğŸ’«</span></p>
                    </div>
                    <button class="start-btn" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
                    <!-- Coupang Partners Ad -->
                    <div class="coupang-ad-container">
                        <iframe src="https://coupa.ng/ciT9UH" width="100%" height="44" frameborder="0" scrolling="no" referrerpolicy="unsafe-url" browsingtopics></iframe>
                    </div>
                    <!-- Coupang Partners Disclosure -->
                    <p class="coupang-disclosure">ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.</p>
                </div>
            `;
        }

        // ì§ˆë¬¸ ë Œë”ë§
        function renderQuestion(app) {
            const currentQuestionKey = questionKeys[currentQuestionIndex];
            const currentQuestion = questions[currentQuestionKey];
            
            app.innerHTML = `
                <h1>ğŸ¾ í…Œë‹ˆìŠ¤ NTRP ë ˆë²¨ í…ŒìŠ¤íŠ¸</h1>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${((currentQuestionIndex + 1) / questionKeys.length) * 100}%"></div>
                </div>
                
                <div class="question-card">
                    <h2>ì§ˆë¬¸ ${currentQuestionIndex + 1} / ${questionKeys.length}</h2>
                    <p class="question">${currentQuestion.question}</p>
                    <p class="question-description">${currentQuestion.description}</p>
                    
                    <div class="options">
                        ${Object.entries(currentQuestion.levels).map(([score, description]) => `
                            <button class="option ${answers[currentQuestionKey] === parseInt(score) ? 'selected' : ''}" 
                                    onclick="selectAnswer('${currentQuestionKey}', ${score})">
                                <!-- Score display removed -->
                                <span class="description">${description}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>

                <div class="navigation">
                    ${currentQuestionIndex > 0 ? `
                        <button class="nav-btn prev" onclick="previousQuestion()">ì´ì „</button>
                    ` : ''}
                    
                    ${currentQuestionIndex < questionKeys.length - 1 ? `
                        <button class="nav-btn next" onclick="nextQuestion()" 
                                ${!answers[currentQuestionKey] ? 'disabled' : ''}>ë‹¤ìŒ</button>
                    ` : `
                        <button class="nav-btn submit" onclick="calculateResult()" 
                                ${Object.keys(answers).length < questionKeys.length ? 'disabled' : ''}>ê²°ê³¼ ë³´ê¸°</button>
                    `}
                </div>
            `;
        }

        // ê²°ê³¼ ë Œë”ë§
        function renderResult(app) {
            app.innerHTML = `
                <h1>ğŸ¾ NTRP í…ŒìŠ¤íŠ¸ ê²°ê³¼</h1>
                <div class="result-card">
                    <h2>ë‹¹ì‹ ì˜ NTRP ë ˆë²¨ì€</h2>
                    <div class="ntrp-level">${result.ntrp_level}</div>
                    <p class="description">${result.description}</p>
                    <div class="stats">
                        <p>í‰ê·  ì ìˆ˜: ${result.average_score}/5</p>
                        <p>ì‘ë‹µí•œ ì§ˆë¬¸: ${result.total_questions}ê°œ</p>
                    </div>
                </div>
                
                <div class="detailed-analysis">
                    <h3>ğŸ“Š ìƒì„¸ ë¶„ì„</h3>
                    
                    <div class="category-scores">
                        <h4>ì˜ì—­ë³„ ì ìˆ˜</h4>
                        <div class="score-grid">
                            ${Object.entries(result.category_scores).map(([category, score]) => `
                                <div class="score-item">
                                    <span class="category-name">${category}</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: ${(score / 5) * 100}%"></div>
                                    </div>
                                    <span class="score-value">${score}/5</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="strengths-weaknesses">
                        ${result.strengths && result.strengths.length > 0 ? `
                            <div class="strengths">
                                <h4>ğŸ’ª ê°•ì </h4>
                                <ul>
                                    ${result.strengths.map(strength => `<li>${strength}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        
                        ${result.weaknesses && result.weaknesses.length > 0 ? `
                            <div class="weaknesses">
                                <h4>ğŸ¯ ê°œì„ ì </h4>
                                <ul>
                                    ${result.weaknesses.map(weakness => `<li>${weakness}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                    
                    ${result.improvement_suggestions ? `
                        <div class="improvement-suggestions">
                            <h4>ğŸ’¡ ê°œì„  ì œì•ˆ</h4>
                            <ul>
                                ${result.improvement_suggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                </div>
                
                <button class="restart-btn" onclick="restartTest()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
                <!-- Coupang Partners Ad -->
                <div class="coupang-ad-container">
                    <iframe src="https://coupa.ng/ciT9UH" width="100%" height="44" frameborder="0" scrolling="no" referrerpolicy="unsafe-url" browsingtopics></iframe>
                </div>
                <!-- Coupang Partners Disclosure -->
                <p class="coupang-disclosure">ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.</p>
            `;
        }

        // Test start
        function startTest() {
            currentState = 'quiz';
            currentQuestionIndex = 0;
            answers = {};
            result = null;
            renderApp();
        }

        // Select answer
        function selectAnswer(questionKey, score) {
            answers[questionKey] = score;
            renderApp();
        }

        // Next question
        function nextQuestion() {
            if (currentQuestionIndex < questionKeys.length - 1) {
                currentQuestionIndex++;
                renderApp();
            }
        }

        // Previous question
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderApp();
                // Restore selected state after rendering
                const currentQuestionKey = questionKeys[currentQuestionIndex];
                const selectedScore = answers[currentQuestionKey];
                if (selectedScore) {
                    const options = document.querySelectorAll('.option');
                    options.forEach(option => {
                        if (questions[currentQuestionKey].levels[selectedScore] === option.querySelector('.description').innerText) {
                            option.classList.add('selected');
                        } else {
                            option.classList.remove('selected');
                        }
                    });
                }
            }
        }

        // Calculate result
        function calculateResult() {
            const totalScore = Object.values(answers).reduce((sum, score) => sum + score, 0);
            const averageScore = totalScore / Object.keys(answers).length;
            
            // Determine NTRP level
            let ntrpLevel;
            if (averageScore <= 1.25) ntrpLevel = 1.0;
            else if (averageScore <= 1.75) ntrpLevel = 1.5;
            else if (averageScore <= 2.25) ntrpLevel = 2.0;
            else if (averageScore <= 2.75) ntrpLevel = 2.5;
            else if (averageScore <= 3.25) ntrpLevel = 3.0;
            else if (averageScore <= 3.75) ntrpLevel = 3.5;
            else if (averageScore <= 4.25) ntrpLevel = 4.0;
            else if (averageScore <= 4.75) ntrpLevel = 4.5;
            else ntrpLevel = 5.0; // If average score is above 4.75, it's 5.0

            // Detailed analysis
            const categoryNames = {
                "forehand": "í¬í•¸ë“œ",
                "backhand": "ë°±í•¸ë“œ",
                "serve": "ì„œë¸Œ",
                "volley": "ë°œë¦¬",
                "footwork": "í’‹ì›Œí¬",
                "strategy": "ì „ëµ",
                "consistency": "ì¼ê´€ì„±",
                "mental": "ë©˜íƒˆ"
            };

            const categoryScores = {};
            Object.keys(categoryNames).forEach(category => {
                if (answers[category]) {
                    categoryScores[categoryNames[category]] = answers[category];
                }
            });

            // Analyze strengths and weaknesses
            const strengths = [];
            const weaknesses = [];
            Object.entries(categoryScores).forEach(([category, score]) => {
                if (score >= 4) strengths.push(category);
                else if (score <= 2) weaknesses.push(category);
            });

            // Improvement suggestions
            const improvementSuggestions = [];
            if (weaknesses.includes("í¬í•¸ë“œ")) {
                improvementSuggestions.push("í¬í•¸ë“œ ê¸°ë³¸ê¸° ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ìŠ¤ìœ™ í¼ê³¼ íƒ€ì ì„ ì¤‘ì ì ìœ¼ë¡œ ì—°ìŠµí•´ë³´ì„¸ìš”.");
            }
            if (weaknesses.includes("ë°±í•¸ë“œ")) {
                improvementSuggestions.push("ë°±í•¸ë“œ ê·¸ë¦½ê³¼ ì¤€ë¹„ ë™ì‘ì„ ì—°ìŠµí•´ë³´ì„¸ìš”. ë°±í•¸ë“œë¥¼ í”¼í•˜ì§€ ë§ê³  ì ê·¹ì ìœ¼ë¡œ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì„œë¸Œ")) {
                improvementSuggestions.push("ì„œë¸Œ ì—°ìŠµì„ í†µí•´ ì •í™•ì„±ê³¼ íŒŒì›Œë¥¼ í–¥ìƒì‹œì¼œë³´ì„¸ìš”. ì„¸ì»¨ë“œ ì„œë¸Œë¶€í„° ì•ˆì •í™”í•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ë°œë¦¬")) {
                improvementSuggestions.push("ë„¤íŠ¸ í”Œë ˆì´ì— ìµìˆ™í•´ì§€ì„¸ìš”. ê°„ë‹¨í•œ ë°œë¦¬ë¶€í„° ì‹œì‘í•´ì„œ ì ì§„ì ìœ¼ë¡œ ë°œì „ì‹œí‚¤ì„¸ìš”.");
            }
            if (weaknesses.includes("í’‹ì›Œí¬")) {
                improvementSuggestions.push("ê¸°ë³¸ì ì¸ ì´ë™ ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ì‚¬ì´ë“œ ìŠ¤í…ê³¼ í¬ë¡œìŠ¤ì˜¤ë²„ ìŠ¤í…ì„ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì „ëµ")) {
                improvementSuggestions.push("ê²Œì„ ì¤‘ ìƒëŒ€ë°©ì„ ê´€ì°°í•˜ê³  ì•½ì ì„ ì°¾ì•„ë³´ì„¸ìš”. ë‹¤ì–‘í•œ ìƒ· ì¡°í•©ì„ ì—°ìŠµí•˜ì„¸ìš”.");
            }
            if (weaknesses.includes("ì¼ê´€ì„±")) {
                improvementSuggestions.push("ì•ˆì •ì ì¸ ìƒ·ì„ ìœ„í•´ ê¸°ë³¸ê¸°ë¥¼ íƒ„íƒ„íˆ í•˜ì„¸ìš”. ì—ëŸ¬ë¥¼ ì¤„ì´ëŠ” ì—°ìŠµì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");
            }
            if (weaknesses.includes("ë©˜íƒˆ")) {
                improvementSuggestions.push("ì••ë°•ê°ì— ëŒ€ì²˜í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ì‹¤ìˆ˜ë¥¼ í•´ë„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ë§ˆìŒê°€ì§ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");
            }
            if (improvementSuggestions.length === 0) {
                improvementSuggestions.push("ì „ë°˜ì ìœ¼ë¡œ ì¢‹ì€ ì‹¤ë ¥ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë” ë†’ì€ ë ˆë²¨ì„ ìœ„í•´ ê³ ê¸‰ ê¸°ìˆ ì„ ì—°ìŠµí•´ë³´ì„¸ìš”.");
            }

            result = {
                ntrp_level: ntrpLevel,
                description: ntrpDescriptions[ntrpLevel] || "ì •ì˜ë˜ì§€ ì•Šì€ ë ˆë²¨",
                average_score: Math.round(averageScore * 10) / 10,
                total_questions: Object.keys(answers).length,
                category_scores: categoryScores,
                strengths: strengths,
                weaknesses: weaknesses,
                improvement_suggestions: improvementSuggestions
            };

            renderApp();
        }

        // Restart test
        function restartTest() {
            currentState = 'welcome';
            currentQuestionIndex = 0;
            answers = {};
            result = null;
            renderApp();
        }

        // Initialize app
        renderApp();
    </script>
</body>
</html>
